<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodWise - AI-Powered Nutrition & Food Recommendations</title>
    <meta name="description" content="Get personalized food recommendations based on AI analysis of your photo. Smart nutrition planning with location-based restaurant suggestions.">
    
    <!-- Preload Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="real-data-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Meta Tags -->
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçé</text></svg>">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="#" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-apple-alt"></i>
                </div>
                <div>
                    <h1>FoodWise</h1>
                    <p class="tagline">AI-Powered Nutrition Intelligence</p>
                </div>
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero-section">
                <h1 class="hero-title">Smart Food Recommendations</h1>
                <p class="hero-subtitle">
                    Upload your photo and let AI analyze your body composition to provide personalized nutrition recommendations, 
                    nearby restaurant suggestions, and custom meal plans tailored just for you.
                </p>
            </section>

            <!-- Main Form -->
            <form id="foodForm" class="food-form">
                <!-- AI Body Analysis Section -->
                <section class="form-section">
                    <h3><i class="fas fa-brain"></i> AI Body Analysis & Auto-Fill</h3>
                    
                    <div class="input-group">
                        <label for="bodyImage">Upload Your Photo for Automatic Form Filling</label>
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-content">
                                <i class="fas fa-user-circle"></i>
                                <p>Upload your photo to auto-fill your profile</p>
                                <p class="upload-subtitle">AI will detect your height, weight, age, and gender</p>
                                <div class="upload-options">
                                    <button type="button" class="upload-option-btn" id="browseFiles">
                                        <i class="fas fa-folder-open"></i>
                                        Browse Photos
                                    </button>
                                    <button type="button" class="upload-option-btn" id="captureCamera">
                                        <i class="fas fa-camera"></i>
                                        Take Photo
                                    </button>
                                </div>
                                <input type="file" id="bodyImage" name="bodyImage" accept="image/*" hidden>
                                <input type="file" id="cameraCapture" name="cameraCapture" accept="image/*" capture="user" hidden>
                            </div>
                            <div class="upload-preview" id="uploadPreview" style="display: none;">
                                <img id="previewImage" alt="Uploaded photo preview">
                                <div class="preview-overlay">
                                    <button type="button" class="preview-action-btn" id="retakePhoto" style="display: none;">
                                        <i class="fas fa-redo"></i>
                                        Retake
                                    </button>
                                    <button type="button" class="remove-btn" id="removeUpload" aria-label="Remove photo">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Camera Modal -->
                        <div class="camera-modal" id="cameraModal" style="display: none;" role="dialog" aria-labelledby="cameraModalTitle">
                            <div class="camera-modal-content">
                                <div class="camera-header">
                                    <h4 id="cameraModalTitle"><i class="fas fa-camera"></i> Capture for Body Analysis</h4>
                                    <button type="button" class="close-camera" id="closeCameraModal" aria-label="Close camera">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="camera-container">
                                    <video id="cameraStream" autoplay playsinline aria-label="Camera preview"></video>
                                    <canvas id="captureCanvas" style="display: none;"></canvas>
                                    <div class="camera-overlay">
                                        <div class="camera-guide">
                                            <div class="body-guide-frame"></div>
                                            <p>Position yourself in the frame</p>
                                            <p class="guide-tip">Full body or upper body shots work best</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="camera-controls">
                                    <button type="button" class="camera-control-btn" id="switchCamera">
                                        <i class="fas fa-sync-alt"></i>
                                        Switch Camera
                                    </button>
                                    <button type="button" class="capture-btn" id="capturePhoto">
                                        <i class="fas fa-camera"></i>
                                        Capture Photo
                                    </button>
                                    <button type="button" class="camera-control-btn" id="cancelCapture">
                                        <i class="fas fa-times"></i>
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- AI Analysis Results -->
                        <div class="ai-analysis" id="aiAnalysis" style="display: none;">
                            <div class="analysis-header">
                                <i class="fas fa-brain"></i>
                                <span>AI Body Analysis Results</span>
                                <div class="loading-spinner" id="analysisSpinner" style="display: none;"></div>
                            </div>
                            <div class="analysis-results" id="analysisResults"></div>
                            <div class="auto-fill-status" id="autoFillStatus" style="display: none;">
                                <div class="status-message">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Form automatically filled based on AI analysis!</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Features Info -->
                    <div class="ai-features">
                        <h4><i class="fas fa-robot"></i> What AI Will Auto-Fill:</h4>
                        <div class="feature-grid">
                            <div class="feature-item">
                                <i class="fas fa-ruler-vertical"></i>
                                <span>Height Detection</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-weight"></i>
                                <span>Weight Estimation</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-birthday-cake"></i>
                                <span>Age Estimation</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-venus-mars"></i>
                                <span>Gender Detection</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-dumbbell"></i>
                                <span>Body Type Analysis</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-heartbeat"></i>
                                <span>Fitness Level</span>
                            </div>
                        </div>
                        
                        <!-- Debug button for testing -->
                        <div style="margin-top: var(--space-6); text-align: center;">
                            <button type="button" id="testAutoFillBtn" class="btn btn-secondary btn-sm">
                                <i class="fas fa-bug"></i>
                                Test Auto-Fill (Debug)
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Personal Information Section -->
                <section class="form-section">
                    <h3><i class="fas fa-user"></i> Personal Information</h3>
                    
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="weight">Current Weight (kg) <i class="fas fa-info-circle" data-tooltip="Your current weight helps calculate accurate calorie needs"></i></label>
                            <input type="number" id="weight" name="weight" class="input" min="30" max="200" step="0.1" 
                                   placeholder="Enter your weight" required>
                        </div>
                        
                        <div class="input-group">
                            <label for="height">Height (cm) <i class="fas fa-info-circle" data-tooltip="Height is used for BMI calculation and metabolic rate"></i></label>
                            <input type="number" id="height" name="height" class="input" min="120" max="220" 
                                   placeholder="Enter your height" required>
                        </div>
                        
                        <div class="input-group">
                            <label for="age">Age <i class="fas fa-info-circle" data-tooltip="Age affects your metabolic rate and nutritional needs"></i></label>
                            <input type="number" id="age" name="age" class="input" min="13" max="100" 
                                   placeholder="Enter your age" required>
                        </div>
                        
                        <div class="input-group">
                            <label for="gender">Gender <i class="fas fa-info-circle" data-tooltip="Gender affects calorie calculation and nutritional requirements"></i></label>
                            <select id="gender" name="gender" class="input" required>
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Diet & Goals Section -->
                <section class="form-section">
                    <h3><i class="fas fa-target"></i> Diet & Fitness Goals</h3>
                    
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="dietType">Diet Type</label>
                            <select id="dietType" name="dietType" class="input" required>
                                <option value="">Select diet type</option>
                                <option value="balanced">Balanced Diet</option>
                                <option value="vegetarian">Vegetarian</option>
                                <option value="vegan">Vegan</option>
                                <option value="keto">Ketogenic</option>
                                <option value="paleo">Paleo</option>
                                <option value="mediterranean">Mediterranean</option>
                                <option value="low-carb">Low Carb</option>
                                <option value="high-protein">High Protein</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="fitnessGoal">Fitness Goal</label>
                            <select id="fitnessGoal" name="fitnessGoal" class="input" required>
                                <option value="">Select fitness goal</option>
                                <option value="weight-loss">Weight Loss</option>
                                <option value="weight-gain">Weight Gain</option>
                                <option value="muscle-gain">Muscle Gain</option>
                                <option value="maintenance">Maintain Weight</option>
                                <option value="endurance">Build Endurance</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="activityLevel">Activity Level</label>
                            <select id="activityLevel" name="activityLevel" class="input" required>
                                <option value="">Select activity level</option>
                                <option value="sedentary">Sedentary (little/no exercise)</option>
                                <option value="light">Light (1-3 days/week)</option>
                                <option value="moderate">Moderate (3-5 days/week)</option>
                                <option value="active">Active (6-7 days/week)</option>
                                <option value="very-active">Very Active (2x/day)</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="budget">Budget per Meal</label>
                            <select id="budget" name="budget" class="input" required>
                                <option value="">Select budget range</option>
                                <option value="low">Budget-friendly ($5-15)</option>
                                <option value="medium">Moderate ($15-30)</option>
                                <option value="high">Premium ($30-50)</option>
                                <option value="luxury">Luxury ($50+)</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Dietary Restrictions Section -->
                <section class="form-section">
                    <h3><i class="fas fa-exclamation-triangle"></i> Dietary Restrictions</h3>
                    
                    <div class="input-group">
                        <label>Select any allergies or dietary restrictions:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="dairy" name="allergies" value="dairy">
                                <label for="dairy">Dairy</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="nuts" name="allergies" value="nuts">
                                <label for="nuts">Nuts</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="gluten" name="allergies" value="gluten">
                                <label for="gluten">Gluten</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="eggs" name="allergies" value="eggs">
                                <label for="eggs">Eggs</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="soy" name="allergies" value="soy">
                                <label for="soy">Soy</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="shellfish" name="allergies" value="shellfish">
                                <label for="shellfish">Shellfish</label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Location Section -->
                <section class="form-section">
                    <h3><i class="fas fa-map-marker-alt"></i> Location Services</h3>
                    
                    <div class="location-section">
                        <div class="location-icon">
                            <i class="fas fa-crosshairs"></i>
                        </div>
                        <h4>Enable Location for Restaurant Recommendations</h4>
                        <p>Get personalized restaurant suggestions and food options near you with Google Maps integration.</p>
                        <button type="button" id="getLocation" class="btn btn-primary btn-lg">
                            <i class="fas fa-location-arrow"></i>
                            Get My Location
                        </button>
                        <div id="locationStatus" class="location-status" style="margin-top: 1rem;"></div>
                    </div>
                </section>

                <!-- Submit Section -->
                <section class="submit-section">
                    <!-- Test Button for Development -->
                    <button type="button" class="btn btn-secondary" id="fillTestData" style="margin-right: 1rem;">
                        <i class="fas fa-flask"></i>
                        Fill Test Data
                    </button>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-magic"></i>
                        Get My Food Recommendations
                    </button>
                </section>
            </form>

            <!-- Results Section -->
            <section class="results-section" id="results" style="display: none;">
                <div class="results-grid">
                    <!-- Nutrition Goals Card -->
                    <div class="result-card" id="nutritionGoals">
                        <h4><i class="fas fa-calculator"></i> Your Nutrition Goals</h4>
                        <div id="nutritionContent"></div>
                    </div>

                    <!-- Food Recommendations Card -->
                    <div class="result-card" id="foodRecommendations">
                        <h4><i class="fas fa-utensils"></i> Recommended Foods</h4>
                        <div id="foodContent"></div>
                    </div>
                </div>
            </section>

            <!-- Nearby Restaurants Section -->
            <section class="nearby-restaurants-section" id="nearbyRestaurantsSection" style="display: none;">
                <div class="restaurants-container">
                    <div class="restaurants-header">
                        <h2><i class="fas fa-map-marker-alt"></i> Nearby Restaurants & Food Options</h2>
                        <p>Discover restaurants near you with personalized menu recommendations based on your dietary preferences</p>
                    </div>
                    <div class="restaurants-content" id="locationContent">
                        <!-- Restaurant content will be populated here -->
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Floating Action Button -->
    <button class="fab" id="quickRecommendations" data-tooltip="Get Quick Recommendations" title="Get Quick Recommendations">
        <i class="fas fa-magic"></i>
    </button>

    <!-- Enhanced Footer -->
    <footer class="enhanced-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-apple-alt"></i>
                        <span>FoodWise</span>
                    </div>
                    <p>AI-powered nutrition intelligence for healthier living.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook" data-tooltip="Follow us on Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" aria-label="Twitter" data-tooltip="Follow us on Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram" data-tooltip="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn" data-tooltip="Connect on LinkedIn"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Features</h4>
                    <ul>
                        <li><a href="#ai-analysis">ü§ñ AI Body Analysis</a></li>
                        <li><a href="#nutrition">üçé Nutrition Planning</a></li>
                        <li><a href="#location">üìç Location Services</a></li>
                        <li><a href="#recommendations">‚ú® Smart Recommendations</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#help">üìö Help Center</a></li>
                        <li><a href="#blog">üìù Nutrition Blog</a></li>
                        <li><a href="#recipes">üçΩÔ∏è Healthy Recipes</a></li>
                        <li><a href="#tips">üí° Health Tips</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#privacy">üîí Privacy Policy</a></li>
                        <li><a href="#terms">üìã Terms of Service</a></li>
                        <li><a href="#contact">üìß Contact Us</a></li>
                        <li><a href="#feedback">üí¨ Feedback</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 FoodWise. All rights reserved. Made with ‚ù§Ô∏è for healthier living.</p>
                <div class="footer-badges">
                    <span class="status-badge success">AI-Powered</span>
                    <span class="status-badge info">Privacy-First</span>
                    <span class="status-badge warning">Beta</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Configuration and Real Data Integration Scripts -->
    <script src="config.js"></script>
    <script src="location-service.js"></script>
    <script src="real-data-integration.js"></script>
    
    <!-- Main Application Script -->
    <script src="script.js"></script>
</body>
</html>
