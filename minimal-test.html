<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal FoodWise Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .form-group { margin: 15px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        button { background: #007bff; color: white; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 5px; }
        button:hover { background: #0056b3; }
        .results { margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 5px; }
        .error { background: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .success { background: #d4edda; color: #155724; padding: 10px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üß™ Minimal FoodWise Test</h1>
    
    <form id="testForm">
        <div class="form-group">
            <label for="weight">Weight (kg):</label>
            <input type="number" id="weight" name="weight" value="70" required>
        </div>
        
        <div class="form-group">
            <label for="height">Height (cm):</label>
            <input type="number" id="height" name="height" value="175" required>
        </div>
        
        <div class="form-group">
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" value="30" required>
        </div>
        
        <div class="form-group">
            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="dietType">Diet Type:</label>
            <select id="dietType" name="dietType" required>
                <option value="balanced">Balanced</option>
                <option value="vegetarian">Vegetarian</option>
                <option value="keto">Keto</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="fitnessGoal">Fitness Goal:</label>
            <select id="fitnessGoal" name="fitnessGoal" required>
                <option value="weight-loss">Weight Loss</option>
                <option value="muscle-gain">Muscle Gain</option>
                <option value="maintenance">Maintenance</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="activityLevel">Activity Level:</label>
            <select id="activityLevel" name="activityLevel" required>
                <option value="sedentary">Sedentary</option>
                <option value="light">Light</option>
                <option value="moderate">Moderate</option>
                <option value="active">Active</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="budget">Budget:</label>
            <select id="budget" name="budget" required>
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            </select>
        </div>
        
        <button type="submit">Test Form Submission</button>
        <button type="button" onclick="testJavaScript()">Test JavaScript Classes</button>
        <button type="button" onclick="window.open('index.html', '_blank')">Open Main App</button>
    </form>
    
    <div id="results" class="results" style="display: none;">
        <h3>Test Results:</h3>
        <div id="output"></div>
    </div>
    
    <script src="script.js"></script>
    <script>
        let testFoodWise;
        
        document.getElementById('testForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const resultsDiv = document.getElementById('results');
            const outputDiv = document.getElementById('output');
            resultsDiv.style.display = 'block';
            outputDiv.innerHTML = '';
            
            function addResult(message, type = 'info') {
                const div = document.createElement('div');
                div.className = type;
                div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
                outputDiv.appendChild(div);
            }
            
            try {
                addResult('üß™ Starting form submission test...', 'success');
                
                // Test if FoodWise class exists
                if (typeof FoodWise === 'undefined') {
                    addResult('‚ùå FoodWise class not found!', 'error');
                    return;
                }
                
                addResult('‚úÖ FoodWise class found', 'success');
                
                // Create FoodWise instance
                testFoodWise = new FoodWise();
                addResult('‚úÖ FoodWise instance created', 'success');
                
                // Test form data collection
                const formData = new FormData(document.getElementById('testForm'));
                const testProfile = {
                    weight: parseInt(formData.get('weight')),
                    height: parseInt(formData.get('height')),
                    age: parseInt(formData.get('age')),
                    gender: formData.get('gender'),
                    dietType: formData.get('dietType'),
                    fitnessGoal: formData.get('fitnessGoal'),
                    activityLevel: formData.get('activityLevel'),
                    budget: formData.get('budget'),
                    allergies: []
                };
                
                addResult(`‚úÖ Form data collected: ${JSON.stringify(testProfile)}`, 'success');
                
                // Test nutrition calculation
                testFoodWise.userProfile = testProfile;
                testFoodWise.calculateNutritionGoals();
                addResult(`‚úÖ Nutrition goals calculated: ${JSON.stringify(testFoodWise.userProfile.nutritionGoals)}`, 'success');
                
                // Test food recommendations
                testFoodWise.generateFoodRecommendations();
                addResult(`‚úÖ Food recommendations generated: ${testFoodWise.userProfile.recommendations.length} items`, 'success');
                
                // Test nearby locations
                testFoodWise.findNearbyLocations();
                addResult(`‚úÖ Nearby locations found: ${testFoodWise.userProfile.nearbyLocations.length} locations`, 'success');
                
                addResult('üéâ All tests passed! The core functionality is working.', 'success');
                
            } catch (error) {
                addResult(`‚ùå Error during testing: ${error.message}`, 'error');
                console.error('Test error:', error);
            }
        });
        
        function testJavaScript() {
            const resultsDiv = document.getElementById('results');
            const outputDiv = document.getElementById('output');
            resultsDiv.style.display = 'block';
            outputDiv.innerHTML = '';
            
            function addResult(message, type = 'info') {
                const div = document.createElement('div');
                div.className = type;
                div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
                outputDiv.appendChild(div);
            }
            
            addResult('üß™ Testing JavaScript classes...', 'success');
            
            if (typeof FoodWise !== 'undefined') {
                addResult('‚úÖ FoodWise class available', 'success');
            } else {
                addResult('‚ùå FoodWise class not found', 'error');
            }
            
            if (typeof UIEnhancements !== 'undefined') {
                addResult('‚úÖ UIEnhancements class available', 'success');
            } else {
                addResult('‚ùå UIEnhancements class not found', 'error');
            }
            
            // Test if main app elements would exist
            const testElements = ['foodForm', 'results', 'nutritionContent', 'foodContent', 'locationContent'];
            testElements.forEach(id => {
                // We can't test these here since they're in the main app
                addResult(`‚ÑπÔ∏è ${id} - needs to be tested in main app`, 'info');
            });
        }
    </script>
</body>
</html>
